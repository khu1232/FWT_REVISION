<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{
            align-items: center;
            justify-content: center;
            text-align: center;
            background-color: rgb(232, 233, 240);
        }
        h2{
            font-size: 3rem;


        }
        #input{
            width: 20%;
            padding: 5px;
            font-size: 1rem;
            background-color: rgb(79,75,73);
            color: white;
            border: none;
            border-radius: 10px;



        }
        #input::placeholder{
            color: white;
            font-size: 2rem;

        }
        #add{
            background-color: rgb(79, 75, 75);
            color:white;
            font-size: 1rem;
            border: none;
            border-radius: 10px;
            width: 10%;
            padding: 4px;
        }
        .div1{
            color: white;
            background-color: rgb(154, 143, 143);
            display: flex;
            justify-content: space-evenly;
            margin: 5px;
            border-radius: 10px;
            

        }
    
        .delBtn , .editBtn{
            background-color: rgb(79, 75, 75);
            color:white;
            font-size: 0.80rem;
            border: none;
            border-radius: 10px;
            margin: 5px;
        }

        #list{
            background-color: black;
            box-shadow: 2px 2px 2px black;
            margin: 14px;
            padding: 10px;
            border-radius: 10px;
            color: white;
        }

        p{
            align-items: center;
            justify-content: center;
            text-align: center;
            color: black;
        }


    </style>
</head>
<body>
    <h2>Organise your task!</h2>
    <input type="text" placeholder="enter task" id="input">
    <button id="add">Add</button>
  
    <div id="list">Nothing matter more than Consistency</div>

    <script>
        const btn = document.getElementById('add')
        const taskList = document.getElementById('list')
        const input = document.getElementById('input')

        let tasks = JSON.parse(localStorage.getItem('tasks')) || [ ]

        btn.addEventListener("click" , ()=>{
            const text = input.value.trim()
            if(text == " ")return 

            const task = {
                id : Date.now(),
                text : text,
                completed : false
            }
            tasks.push(task)
            saveTasks()
            renderTask()
            input.value = " "
        })
        
        function saveTasks(){
            localStorage.setItem("tasks" ,JSON.stringify(tasks))
        }

        function renderTask(){
            taskList.innerHTML = " "

            tasks.forEach(task => {
                const div1 = document.createElement("div")
                div1.classList.add('div1')

                const p = document.createElement('p')

                const delBtn = document.createElement('button')

                const EditBtn = document.createElement('button')

                delBtn.classList.add('delBtn')
                EditBtn.classList.add('editBtn')

                p.innerText = task.text 
                delBtn.innerText="DELETE"
                EditBtn.innerText = "EDIT TEXT"

                delBtn.addEventListener("click",()=>{
                    tasks = tasks.filter(t=>t.id !== task.id)
                    saveTasks()
                    renderTask()
                })

                EditBtn.addEventListener("click",()=>{
                    const tasks_need_to_update = tasks.find(t=>t.id === task.id)
                    const new_task = prompt("edit task" , tasks_need_to_update.text)

                    if(new_task!== tasks_need_to_update.text &&  new_task!==""){
                        tasks_need_to_update.text = new_task
                        saveTasks()
                        renderTask()
                    }

                    
                })
                div1.append(p,delBtn,EditBtn)
                taskList.appendChild(div1)
            })

        }
        renderTask()


        // if you don't want to render the previous added task ... then you need to localStorage.clear()

    </script>
</body>
</html>